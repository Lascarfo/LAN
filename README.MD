# Тестовое задание для "LAN проект"
### Задача: загрузка и обработка полученных изображений карты от левой верхней координаты до правой нижней.
### На выходе должно получиться изображение, содержащее всю запрашиваемую пользователем область.

## Коэффициенты масштабирования (k):
* 19 - здания (ближе)
* 16 - улицы (дальше)

## Решение задачи:
Изначально было решено загрузить все изображения в заданном пользователем масштабе, предварительно подобрав нужный шаг перемещения по карте.
После того, как все изображения были получены, возник вопрос о том, какими средставми их лучше объединять.

Сперва я решил воспользоваться встроенным методом библиотеки **cv2 — createStitcher()**.  
Результаты на **3-5 изображениях были неплохие**, но когда речь заходила об конкантинации **> 50 кусочков**, то тут встроенный ститчер не справлялся.

#### Тогда было решено выстроить логику объединения изображений на более низком уровне.

1. Я воспользовался алгоритмом масштабно-инвариантной трансформации признаков (**SIFT**) для извлечения ключевых точек на двух соседних изображениях:

левое изображение             |  правое изображение
:-------------------------:|:-------------------------:
![](https://sun9-62.userapi.com/c854320/v854320936/1e279d/mb2293XMj4o.jpg)  |  ![](https://sun9-56.userapi.com/c854320/v854320936/1e27a5/M2cgBlaLVVU.jpg)

2. После выявления признаков, я рассчитал совпадения дискрипторов на обоих изображениях:

совпадения дискрипторов
:-------------------------:|
![alt text](https://sun9-71.userapi.com/c854320/v854320936/1e27b4/xsIpyrRFw9s.jpg)

3. Выполнил слияние изображений, применя метод оценки параметров модели на основе случайных выборок (**RANSAC**),
  получил следующий результат:
  
результат слияния двух изображений
:-------------------------:| 
![](https://sun9-23.userapi.com/c854320/v854320936/1e27bb/RPsiSIlanYo.jpg)
